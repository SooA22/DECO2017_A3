% view.layout = 'default';
% ctx.stash.title = "Home - BlaBites"

<!-- Reset margin/padding on html and body to remove the unwanted white top bar -->
<style>
html, body {
  margin: 0 !important;
  padding: 0 !important;
  background: #FAF3F0;
  box-sizing: border-box;
}
</style>

<div style="background-color: #FAF3F0; min-height: 100vh; width: 100vw; font-family: 'Arial', sans-serif; box-sizing: border-box; margin: 0; padding-left: 40px; padding-right: 40px;">

  <!-- ================== TOP HERO ROW ================== -->
  <div
    style="
      display: flex; align-items: center; width: 100%; padding: 2rem 2vw 2rem 2vw; gap: 2vw;
      position: sticky; top: 0; z-index: 10; background: #FAF3F0;
      box-shadow: 0 2px 12px 0 rgba(0,0,0,0.04);
    "
  >
    <!-- Animated Bla + Bla SVG logo (left side) -->
    <div style="width: 340px; height: 90px; display: flex; justify-content: center; align-items: center;">
      <svg viewBox="0 0 480 120">
        <text x="50%" y="60%" text-anchor="middle">Bla + Bla</text>
      </svg>
    </div>
    <!-- Vertical divider line -->
    <div style="width: 2px; height: 120px; background: #502D1B; margin: 0 2vw;"></div>
    <!-- BlaBites Title & Subtitle (right side) -->
    <div style="display: flex; flex-direction: column; align-items: flex-start; justify-content: center;">
      <div style="font-family: 'Russo One', 'Arial Black', sans-serif; font-size: 2.8rem; color: #702020; margin-bottom: 0.4rem;">BlaBites</div>
      <div style="font-family: 'Caveat', 'Comic Sans MS', cursive; font-size: 1rem; color: #702020; letter-spacing: 1px;">
        Come join to share recipes & find friends
      </div>
    </div>
  </div>

  <!-- ============ MAIN CONTENT: Recipes ============= -->
  <div style="display: flex; gap: 2vw; align-items: flex-start; width: 100%; box-sizing: border-box; padding: 2vw;">
    <!-- =========== LEFT: Recipes of the Month =========== -->
    <div style="flex: 1; display: flex; flex-direction: column;">
      <h3 style="color: #8B0000; font-family: 'Russo One', sans-serif;">Recipes of the Month</h3>
      <!-- Top 1 Recipe -->
    <div style="margin-bottom: 2rem;">
      <a href="/recipes/<%= ctx.stash.recipes[0].recipe_id %>" target="_self" style="text-decoration: none;">
        <div style="border: 2px solid #8B0000; border-radius: 12px; padding: 1.2rem; margin-bottom: 1rem; background: #fff;">
          <h3 style="margin-top: 0; color: #8B0000; font-size: 1.2rem;">Top 1 <%= ctx.stash.recipes[0].title %></h3>
          <div style="width: 100%; padding-bottom: 100%; background: #fff; border-radius: 8px; position: relative; overflow: hidden;">
            <img src="/static/images/recipes/fried chicken.jpg" alt="img" 
                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
          </div>
        </div>
      </a>
    </div>

      <!-- Top 2 & Top 3 Recipes -->
    <div style="display: flex; gap: 1rem;">
      <a href="/recipes/<%= ctx.stash.recipes[1].recipe_id %>" target="_self" style="text-decoration: none; flex: 1;">
        <div style="border: 2px solid #8B0000; border-radius: 12px; padding: 0.5rem; background: #fff;">
          <h4 style="color: #8B0000; margin: 0 0 0.3rem 0;">Top 2 <%= ctx.stash.recipes[1].title %></h4>
          <div style="width: 100%; padding-bottom: 100%; background: #fff; border-radius: 8px; position: relative; overflow: hidden;">
            <img src="/static/images/recipes/pad thai.jpg" alt="img" 
                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
          </div>
        </div>
      </a>
      <a href="/recipes/<%= ctx.stash.recipes[2].recipe_id %>" target="_self" style="text-decoration: none; flex: 1;">
        <div style="border: 2px solid #8B0000; border-radius: 12px; padding: 0.5rem; background: #fff;">
          <h4 style="color: #8B0000; margin: 0 0 0.3rem 0;">Top 3 <%= ctx.stash.recipes[2].title %></h4>
          <div style="width: 100%; padding-bottom: 100%; background: #fff; border-radius: 8px; position: relative; overflow: hidden;">
            <img src="/static/images/recipes/spaghetti.jpg" alt="img" 
                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
          </div>
        </div>
      </a>
    </div>
  </div>

<!-- =========== RIGHT: Recent Recipes =========== -->
<div style="flex: 2; display: flex; flex-direction: column;">
  <h3 style="color: #8B0000; font-family: 'Russo One', sans-serif;">Recent Recipes</h3>
  <div style="flex-grow: 1;">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1.2rem; width: 100%;">
      <% const recipeImages = [
        'fried chicken.jpg',
        'pad thai.jpg', 
        'spaghetti.jpg',
        'salad.jpg',
        'taco.jpg',
        'pancake.jpg',
        'fried chicken.jpg',
        'pad thai.jpg'
      ]; %>
      <% for (let i = 0; i < Math.min(ctx.stash.recipes.length, 8); i++) { %>
        <% const recipe = ctx.stash.recipes[i]; %>
        <a href="/recipes/<%= recipe.recipe_id %>" target="_self" style="text-decoration: none;">
          <div style="border: 2px solid #8B0000; border-radius: 12px; padding: 0.8rem; background: #FDF0E6; display: flex; flex-direction: column; justify-content: space-between;">
            <h4 style="color: #8B0000; margin-top: 0;"><%= recipe.title %></h4>
            <div style="width: 100%; padding-bottom: 100%; background: #fff; border-radius: 8px; position: relative; overflow: hidden;">
              <img src="/static/images/recipes/<%= recipeImages[i] %>" alt="<%= recipe.title %>" 
                   style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
            </div>
          </div>
        </a>
      <% } %>
    </div>
  </div>
</div>

<!-- ========== Responsive tweaks for mobile ========== -->
<style>
@media (max-width: 900px) {
  [style*="display: flex;"][style*="gap: 2vw;"] {
    flex-direction: column !important;
    gap: 2rem !important;
  }
  [style*="display: grid;"] {
    grid-template-columns: 1fr 1fr !important;
  }
  pre, code {
    overflow-wrap: break-word;
  }
}
@media (max-width: 600px) {
  [style*="display: grid;"] {
    grid-template-columns: 1fr !important;
  }
  [style*="width: 370px;"] {
    width: 98vw !important;
    min-width: 0 !important;
    height: auto !important;
    margin: 0 auto 1rem auto !important;
  }
    pre, code {
    overflow-wrap: break-word
    }
}
</style>